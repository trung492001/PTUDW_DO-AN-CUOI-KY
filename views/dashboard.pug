doctype html

mixin breadcrumb(args)
  if (args && args.length > 0)
    div(class="bg-white h-full p-2 md:p-4 shadow-md border mb-2 block items-center")
      ol(class="flex text-gray-900")
        each item, index in args
          if (index == args.length-1)
            li
              span= item.name
          else
            li(class=`${item.link ? "font-semibold cursor-pointer":""}`)
              if (item.link)
                a(href=item.link)
                  span= item.name
              else
                span= item.name
            li
              span(class="mx-2") /

mixin cardContent(data, content, description, icon)
  div(class="px-2 shrink-0 grow-0 basis-full md:basis-1/2 lg:basis-1/4")
    div(class="flex justify-between items-center p-4 rounded bg-gradient-to-r from-green-600 to-green-300 text-white")
      div(id="content")
        p(class="font-semibold uppercase mb-2")=content
        p(class="text-3xl font-bold")=data
        p(class="text-sm leading-4")=description
      div(id="icon" class="w-12 h-12 rounded-full bg-gray-400 flex justify-center items-center")
        i(class=`${icon} text-white`)
        

mixin pagination(currentUrl, currentPage, pageCount)
  - var prefixUrl = '?';
  if pageCount > 0
    nav(class="mt-6 mb-12" id="#pagination")
      ul(class="flex justify-center gap-x-1")

        //- Prev item
        if currentPage > 1
          a(class="" href=`${prefixUrl}page=${currentPage-1}`)
            li(class="border py-1 text-center" style="min-width: 36px;")
              <i class="fas fa-chevron-left"></i>

        //- Small pageCount
        if pageCount < 8
          - for(var i = 1; i <= pageCount; ++i)
            if i == currentPage
              li(class="border bg-gray-100 text-center py-1 cursor-not-allowed" style="min-width: 36px;")
                span(class="underline")=i
            else
              li(class="border text-center py-1" style="min-width: 36px;")
                a(href=`${prefixUrl}page=${i}`)=i
        else
          //- First item
          if currentPage > 4
            li(class="border text-center py-1" style="min-width: 36px;")
              a(href=prefixUrl) 1
            li(class="text-center py-1 cursor-default" style="min-width: 36px;")
              span(class="mt-auto align-baseline text-gray-500") •••

          if currentPage <= 4
            - for(var i = 1; i <= (currentPage == 4 ? 6 : 5); ++i)
              if i == currentPage
                li(class="border bg-gray-100 text-center py-1 cursor-not-allowed" style="min-width: 36px;")
                  span(class="underline")=i
              else
                li(class="border text-center py-1" style="min-width: 36px;")
                  a(href=`${prefixUrl}page=${i}`)=i
          else if pageCount - currentPage < 4
            - for(var i = (pageCount - currentPage == 3 ? currentPage - 2: pageCount - 4); i <= pageCount; ++i)
              if i == currentPage
                li(class="border bg-gray-100 text-center py-1 cursor-not-allowed" style="min-width: 36px;")
                  span(class="underline")=i
              else
                li(class="border text-center py-1" style="min-width: 36px;")
                  a(href=`${prefixUrl}page=${i}`)=i
          
          
          //- Last item
          if pageCount - currentPage >= 4
            li(class="text-center py-1 cursor-default" style="min-width: 36px;")
              span(class="mt-auto align-baseline text-gray-500") •••
            li(class="border text-center py-1" style="min-width: 36px;")
              a(href=`${prefixUrl}page=${pageCount}`)=pageCount
        
        //- Next item
        if currentPage < pageCount
          a(class="" href=`${prefixUrl}page=${currentPage+1}`)
            li(class="border py-1 text-center" style="min-width: 36px;")
              <i class="fas fa-chevron-right"></i>

html(lang="en") 
  head
    title=title 

    // Required meta tags
    meta(charset="utf-8")
    meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")

    //CSS
    link(rel="stylesheet" href="/styles/style.css")
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css")
    link(rel='stylesheet' href='https://use.fontawesome.com/releases/v5.8.2/css/all.css' integrity='sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay' crossorigin='anonymous')

    //JS
    script(src="/javascripts/dashboard.js" defer)
    script(src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js")
    block header
  body
    div(class="flex h-screen overflow-hidden bg-gray-100")
      div
        div(id="dashboard-sidebar-background" class="fixed inset-0 bg-gray-900 bg-opacity-30 z-40 lg:hidden lg:z-auto transition-opacity duration-200 opacity-0 pointer-events-none")
        div(id="dashboard-sidebar" class="flex flex-col absolute z-40 left-0 top-0 lg:static lg:left-auto lg:top-auto -translate-x-64 lg:translate-x-0 transform h-screen overflow-y-scroll lg:overflow-y-auto no-scrollbar w-64 flex-shrink-0 bg-gray-800 p-4 transition-all duration-200 ease-in-out")
          div(class="flex justify-between mb-10 pr-3 sm:px-2")
            button(onclick="hideDashboardSidebar()" class="lg:hidden text-gray-500 hover:text-gray-400 px-4")
              i(class="fas fa-arrow-left")
            a(href="/dashboard" class="block")
              img(src="/images/logo2.svg" class="h-10" alt="Dashboard Logo")
          div
            ul(class="mt-6 space-y-0.5")
              li(class=`px-3 py-2 rounded-sm group${activeCell=="dashboard" ? " bg-gray-900" : ""}`)
                a(class="block truncate transition duration-150" href="/dashboard")
                  div(class="flex items-center")
                    i(class=`fas fa-chart-pie h-8 w-8 inline-block align-middle text-2xl text-gray-200`)
                    span(class=`text-sm font-medium ml-3 duration-200 text-gray-200`) Dashboard
              
              li(class=`px-3 py-2 rounded-sm group${activeCell=="accounts" ? " bg-gray-900" : ""}`)
                a(class="block truncate transition duration-150" href="/dashboard/accounts")
                  div(class="flex items-center")
                    i(class=`fas fa-user-circle h-8 w-8 inline-block align-middle text-2xl text-gray-200`)
                    span(class=`text-sm font-medium ml-3 duration-200 text-gray-200`) Accounts

              li(class=`px-3 py-2 rounded-sm group${activeCell=="store" ? " bg-gray-900" : ""}`)
                a(class="block truncate transition duration-150" href="/dashboard/store")
                  div(class="flex items-center")
                    i(class=`far fa-list-alt h-8 w-8 inline-block align-middle text-2xl text-gray-200`)
                    span(class=`text-sm font-medium ml-3 duration-200 text-gray-200`) Store
              
              li(class=`px-3 py-2 rounded-sm group${activeCell=="order" ? " bg-gray-900" : ""}`)
                a(class="block truncate transition duration-150" href="/dashboard/order")
                  div(class="flex items-center")
                    i(class=`fas fa-cart-arrow-down h-8 w-8 inline-block align-middle text-2xl text-gray-200`)
                    span(class=`text-sm font-medium ml-3 duration-200 text-gray-200`) Order
            
      div(class="relative flex flex-col flex-1 overflow-y-auto overflow-x-hidden")
        header(class="sticky top-0 bg-white border-b border-gray-200 z-30")
          div(class="px-4 sm:px-6 lg:px-8")
            div(class="flex items-center justify-between h-16")
              div(class="flex")
                button(onclick="showDashboardSidebar()" class="text-gray-500 hover:text-gray-600 lg:hidden")
                  i(class="fas fa-bars")
              div(class="flex items-center")
                div(class="relative inline-flex")
                  button(onclick="toggleDashboardDropdown()" class="inline-flex justify-center items-center group")
                    img(class="w-8 h-8 rounded-full" src='/images/default-avatar.png')
                    div(class="flex items-center")
                      span(class="ml-2 text-sm font-medium group-hover:text-gray-800 truncate") alo
                      i(class="fas fa-angle-down w-3 h-3 flex flex-shrink-0 text-gray-400 ml-1")
                  div(id="dashboard-dropdown-main" class="absolute top-full right-0 bg-white border border-gray-200 py-1.5 rounded shadow-lg overflow-hidden mt-1 origin-top transition ease-out duration-200 transform opacity-0 -translate-y-2 invisible" style="min-width: 8rem")
                    ul
                      li
                        a(class="font-medium text-sm text-gray-500 hover:text-gray-600 flex space-x-2 items-center py-1 px-3" href="/dashboard/staff-profile") 
                          <i class="fas fa-user-alt"></i>
                          span My Profile
                      li
                        a(class="font-medium text-sm text-gray-500 hover:text-gray-600 flex space-x-2 items-center py-1 px-3" href="/logout")
                          <i class="fas fa-sign-out-alt"></i> 
                          span Logout
        main
          div(class="px-1 xs:px-2 sm:px-4 py-4 lg:p-8 w-full ")
            +breadcrumb(breadcrumb)
            div(class="bg-white h-full shadow-md border")
              div(class="p-2 md:p-4 border-b font-bold tracking-wider uppercase text-gray-600")=title
              div(class="p-2 md:p-4 bg-gray-100")
                div(class="overflow-x-auto")
                  block content
                if(activeCell && activeCell == "dashboard")
                  div(class="flex -mx-2 flex-row flex-wrap gap-y-4")
                    +cardContent("512","Active users", "Current active users", "fas fa-user-clock")
                    +cardContent(newClient,"New clients", "Monthly new clients", "fas fa-user-plus")
                    +cardContent(newSale,"Sales", "Monthly sales", "fas fa-money-bill-wave")
                    +cardContent(newProduct,"New Products", "Monthly new products", "fas fa-boxes")
                  <canvas id="myChart" style="width:100%" class="bg-white mt-4"></canvas>

          